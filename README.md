# susor
`susor` is work in process and does not intend to substitute any official documentation, software, or other packages.
The main reason of its exsitence is that after having worked on several household surveys using
[Survey Solutions](https://mysurvey.solutions/en//api/survey-solutions-api/) I realized that I was always relying on
old code to get the most of the API protocols offered by Survey Solutions. Survey after survey I saw my self copying old R scripts into new projects. 

My main idea is to develop this package for the future me. So I can continue updating and growing the code that I now I am going to use in the future. However, it would be great if others feel that `susor` is useful for their needs. Please feel free to use it **but be aware that I do not want to be responsible for any bug or for its incorrect use.** 

Also, feel free to collaborate on making `susor` easier and more efficient to use.

## Thus far `susor` does the following:

* Identifies the user on the server with `susor_credentials()`,
* Gets the list of imported questionnaires with `susor_credentials()` or with `susor_get_questionnaires()`, and
* Generates and downloads files from the server to your local drive with `susor_export_file()`


Each of the above functions is documented. 


## The expected workflow of `susor` is like this

1. ALWAYS START BY DEFINING YOUR API CREDENTIALS WITH `susor_credentials()`. All the other functions won't work without this. You must call `susor_credentials()` once you start R or everytime you empty your global environment. You must specify all the paramenters within `susor_credentias()`, including `susor_dir_downloads` and `susor_dir_raw`. You'll use them later. 

2. Look at the tibble `susor_questionnaires` that was generated by `susor_credentials()`.In this tibble you'll find all the parameters to generate and download files with `susor_export_file()`

3. Pass the questionnaire variable and version `susor_qn_variable` and `susor_qn_version` to `suspor_export_file()`, the result of this will be a folder with the unzipped version of that file in the directory (`susor_dir_download`) that you define in step 1

## Basic example

1. Define your credentials and relevant directories with `susor_credentials()`

```{r eval=FALSE}
#define path to surveys folder

survey_dir = "C:/Users/MARADONA/Dropbox/survey/Data Management"

# define my credentials, check that they are ok, and retrieve susor_questionnaires 
# a tibble with the details of the questionnaires imported in Survey Solutions

susor_credentials(susor_server = "http://my.golsurveys.com",
                  susor_user = "maradona",
                  susor_password = "pelusa123",
                  #susor_dir_downloads = file.path(survey_dir, "downloads"),
                  #susor_dir_raw = file.path(survey_dir, "raw")
                  
)

#generate and export file to susor_dir_download which is defined in susor_credentials()

susor_export_file(susor_qn_variable = "best_goals",
                  susor_qn_version = 2)




```

## What I am working on

I am working on creating a function `susor_append_versions()` that will fetch all the versions from `susor_dir_download`, will append them and save the appended version in `susor_dir_raw`. I am also working on functions to ease the use of interview__diagnostics and interview__actions so they can be included in the regular checks during a data collection





https://demo.mysurvey.solutions/apidocs/index.html
